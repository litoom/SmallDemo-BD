<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
  <button id="fade-btn">淡出</button>
  <!-- <button id="button_id"  disabled="disabled">按钮不可点击</button> -->

  <script>
    /*
    点击按钮时，开始改变 fade-obj 的透明度，开始一个淡出（逐渐消失）动画，直到透明度为0
    在动画过程中，按钮的状态变为不可点击
    在动画结束后，按钮状态恢复，且文字变成“淡入”
    在 按钮显示 淡入 的状态时，点击按钮，开始一个“淡入”（逐渐出现）的动画，和上面类似按钮不可点，直到透明度完全不透明
    淡入动画结束后，按钮文字变为“淡出”
    */

    let fadeObj = document.getElementById("fade-obj");
    let fadeBtn = document.getElementById("fade-btn");

    let num = 1;
    function timeIn () {
      if(num > 0 ) {
        num -= 0.01;
        fadeObj.style.opacity = num;
        fadeBtn.disabled = "disabled";  
        var tem1 = setTimeout(timeIn,10);    
      }else { 
        num = 0;
        fadeObj.style.opacity = num;
        fadeBtn.innerText = "淡入";
        fadeBtn.disabled = "";
         clearTimeout(tem1);
         //alert(fadeObj.style.opacity);
      }
    }
    

    function timeOut () {      
      if(num < 1 ) {
        num += 0.01;
        fadeObj.style.opacity = num;
        fadeBtn.disabled = "disabled";
        var tem2 = setTimeout(timeOut,10);
      }else {
        num = 1;
        fadeObj.style.opacity = num;
        fadeBtn.innerText = "淡出";
        fadeBtn.disabled = "";
       clearTimeout(tem2);
       //alert(fadeObj.style.opacity);
      }      
    }
  
    fadeBtn.onclick = function () {
      if(fadeBtn.innerText === "淡出") {
        timeIn();
      }else {
        timeOut();   
      }
    }



















/*        setInterval
    let opacitynum = 1;
    let tem = 0.01;
    let close = fadeBtn.onclick = function () {
      setInterval(function () {
        fadeObj.style.opacity = opacitynum - tem;
        opacitynum = opacitynum - tem;
        fadeBtn.disabled = "disabled";
        if (opacitynum < 0) {
          fadeObj.style.opacity = 0.5;
          fadeBtn.disabled = "";
          fadeBtn.innerText = "淡入";
        }
        
      }, 50);
    }
*/

  </script>
</body>

</html>
